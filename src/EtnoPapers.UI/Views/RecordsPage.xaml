<Page x:Class="EtnoPapers.UI.Views.RecordsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Background="White"
      Foreground="Black">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="40,40,40,0">
            <TextBlock Text="Registros" FontSize="28" FontWeight="Bold" Foreground="#0078D4" Margin="0,0,0,8"/>
            <TextBlock Text="Visualize, filtre e gerencie seus registros de artigos extraídos" FontSize="14" Foreground="#505050" TextWrapping="Wrap"/>
        </StackPanel>

        <!-- Filter Panel -->
        <Border Grid.Row="1"
                Background="#F3F3F3"
                BorderBrush="#E0E0E0"
                BorderThickness="0,1,0,1"
                Padding="40,20">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Buscar:" FontSize="13" VerticalAlignment="Center" Margin="0,0,8,0"/>
                <TextBox Width="250" Padding="8,6" Background="White" BorderBrush="#E0E0E0" Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"/>
            </StackPanel>
        </Border>

        <!-- Records List -->
        <Grid Grid.Row="2" Margin="40,20">
            <!-- Empty State (shown when no records) -->
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <StackPanel.Style>
                    <Style TargetType="StackPanel">
                        <Setter Property="Visibility" Value="Collapsed"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding FilteredRecords.Count}" Value="0">
                                <Setter Property="Visibility" Value="Visible"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </StackPanel.Style>
                <TextBlock Text="Nenhum registro encontrado" FontSize="14" Foreground="#505050" HorizontalAlignment="Center" Margin="0,60,0,0"/>
                <TextBlock Text="Use a seção Upload PDF para adicionar novos registros" FontSize="12" Foreground="#8A8A8A" HorizontalAlignment="Center" Margin="0,8,0,0"/>
            </StackPanel>

            <!-- Records DataGrid (shown when records exist) -->
            <DataGrid ItemsSource="{Binding FilteredRecords}"
                      AutoGenerateColumns="False"
                      IsReadOnly="True"
                      SelectionMode="Extended"
                      GridLinesVisibility="Horizontal"
                      HeadersVisibility="Column"
                      CanUserAddRows="False"
                      CanUserDeleteRows="False"
                      Background="White"
                      BorderBrush="#E0E0E0"
                      BorderThickness="1">
                <DataGrid.Style>
                    <Style TargetType="DataGrid">
                        <Setter Property="Visibility" Value="Visible"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding FilteredRecords.Count}" Value="0">
                                <Setter Property="Visibility" Value="Collapsed"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </DataGrid.Style>
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Título" Binding="{Binding Titulo}" Width="2*" />
                    <DataGridTextColumn Header="Ano" Binding="{Binding Ano}" Width="80" />
                    <DataGridTextColumn Header="Autores" Binding="{Binding Autores[0]}" Width="*" />
                    <DataGridTextColumn Header="Comunidades" Binding="{Binding Comunidades.Count}" Width="120" />
                    <DataGridTextColumn Header="DOI" Binding="{Binding DOI}" Width="180" />
                </DataGrid.Columns>
            </DataGrid>
        </Grid>
    </Grid>

</Page>
